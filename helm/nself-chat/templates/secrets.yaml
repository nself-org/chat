{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nself-chat.secretsName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "nself-chat.labels" . | nindent 4 }}
type: Opaque
stringData:
  # WARNING: Creating secrets from values.yaml is NOT recommended for production
  # Use external secret management (Vault, AWS Secrets Manager, etc.)
  HASURA_ADMIN_SECRET: {{ .Values.secrets.hasuraAdminSecret | default "change-me-in-production" | quote }}
  HASURA_JWT_SECRET: {{ .Values.secrets.hasuraJwtSecret | default "{\"type\":\"HS256\",\"key\":\"change-me-32-char-key-for-jwt-signing\"}" | quote }}
  POSTGRES_PASSWORD: {{ .Values.secrets.postgresPassword | default "change-me-in-production" | quote }}
  REDIS_PASSWORD: {{ .Values.secrets.redisPassword | default "change-me-in-production" | quote }}
{{- end }}
