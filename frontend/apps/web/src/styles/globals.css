@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-specific styles */
@import './mobile.css';

/* RTL (Right-to-Left) support */
@import './rtl.css';

@layer base {
  :root {
    /* Theme colors will be injected by ThemeInjector - default to dark theme */
    --background: #0f172a;
    --foreground: #f8fafc;
    --card: #1e293b;
    --card-foreground: #f8fafc;
    --popover: #1e293b;
    --popover-foreground: #f8fafc;
    --primary: #38bdf8;
    --primary-foreground: #0f172a;
    --secondary: #0ea5e9;
    --secondary-foreground: #0f172a;
    --muted: #94a3b8;
    --muted-foreground: #f8fafc;
    --accent: #0284c7;
    --accent-foreground: #f8fafc;
    --destructive: #ef4444;
    --destructive-foreground: #f8fafc;
    --border: #334155;
    --input: #334155;
    --ring: #38bdf8;
    --radius: 0.75rem;

    /* Additional theme variables */
    --surface: #1e293b;
    --success: #10b981;
    --warning: #f59e0b;
    --error: #ef4444;
    --info: #3b82f6;

    /* Button colors */
    --button-primary-bg: #38bdf8;
    --button-primary-text: #0f172a;
    --button-secondary-bg: #334155;
    --button-secondary-text: #f8fafc;
  }

  .dark {
    --background: #0f172a;
    --foreground: #f8fafc;
    --card: #1e293b;
    --card-foreground: #f8fafc;
    --popover: #1e293b;
    --popover-foreground: #f8fafc;
    --primary: #38bdf8;
    --primary-foreground: #0f172a;
    --secondary: #0ea5e9;
    --secondary-foreground: #0f172a;
    --muted: #94a3b8;
    --muted-foreground: #f8fafc;
    --accent: #0284c7;
    --accent-foreground: #f8fafc;
    --destructive: #ef4444;
    --destructive-foreground: #f8fafc;
    --border: #334155;
    --input: #334155;
    --ring: #38bdf8;

    /* Additional theme variables */
    --surface: #1e293b;
    --success: #10b981;
    --warning: #f59e0b;
    --error: #ef4444;
    --info: #3b82f6;
    --button-primary-bg: #38bdf8;
    --button-primary-text: #0f172a;
    --button-secondary-bg: #334155;
    --button-secondary-text: #f8fafc;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    background-color: var(--background);
    color: var(--foreground);
  }

  /* Apply theme colors to common elements */
  .bg-primary {
    background-color: var(--primary) !important;
  }

  .text-primary {
    color: var(--primary) !important;
  }

  .bg-secondary {
    background-color: var(--secondary) !important;
  }

  .border-primary {
    border-color: var(--primary) !important;
  }

  /* Button styles using theme variables */
  .btn-primary {
    background-color: var(--button-primary-bg) !important;
    color: var(--button-primary-text) !important;
  }

  .btn-secondary {
    background-color: var(--button-secondary-bg) !important;
    color: var(--button-secondary-text) !important;
  }
}

/* Custom scrollbar */
@layer utilities {
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: var(--muted);
    opacity: 0.3;
    @apply rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    opacity: 0.5;
  }
}

/* Accessibility Styles */
@layer base {
  /* CSS Custom Properties for accessibility settings */
  :root {
    --a11y-font-size: 16px;
    --a11y-motion-duration: 200ms;
    --a11y-transition-duration: 150ms;
    --a11y-focus-ring-width: 2px;
    --a11y-target-size: 40px;
    --a11y-min-target-size: 36px;
  }

  /* Reduced Motion */
  .reduce-motion,
  .reduce-motion * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* High Contrast Mode */
  .high-contrast {
    --border: #ffffff;
    --ring: #ffffff;
  }

  .high-contrast[data-contrast='high'] {
    --foreground: #ffffff;
    --muted-foreground: #e5e5e5;
  }

  .high-contrast[data-contrast='higher'] {
    --background: #000000;
    --foreground: #ffffff;
    --card: #000000;
    --muted-foreground: #ffffff;
    --border: #ffffff;
  }

  /* Always Show Focus */
  .always-show-focus *:focus {
    outline: var(--a11y-focus-ring-width) solid var(--ring) !important;
    outline-offset: 2px !important;
  }

  /* Reduce Transparency */
  .reduce-transparency {
    --card: var(--background);
    --popover: var(--background);
  }

  .reduce-transparency *[class*='bg-opacity-'],
  .reduce-transparency *[class*='backdrop-blur'] {
    opacity: 1 !important;
    backdrop-filter: none !important;
  }

  /* Dyslexia-Friendly Font */
  .dyslexia-font {
    font-family: 'OpenDyslexic', 'Comic Sans MS', 'Arial', sans-serif !important;
    letter-spacing: 0.05em;
    word-spacing: 0.1em;
    line-height: 1.6;
  }

  /* Larger Touch Targets */
  .larger-targets button,
  .larger-targets a,
  .larger-targets [role='button'],
  .larger-targets input,
  .larger-targets select,
  .larger-targets textarea {
    min-height: var(--a11y-target-size);
    min-width: var(--a11y-min-target-size);
  }

  /* Keyboard Hints */
  .show-keyboard-hints [data-shortcut]::after {
    content: attr(data-shortcut);
    margin-left: 0.5rem;
    padding: 0.125rem 0.375rem;
    font-size: 0.75rem;
    background-color: var(--muted);
    border-radius: 0.25rem;
    opacity: 0.7;
  }

  /* Screen Reader Optimizations */
  .screen-reader-mode [aria-hidden='true']:not(.sr-decorative) {
    display: none !important;
  }
}

/* Focus Visible Utilities */
@layer utilities {
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  .focus-outline {
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary;
  }

  /* Skip link styles */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:z-[9999];
    @apply focus:block focus:rounded-md focus:bg-primary focus:px-4 focus:py-2;
    @apply focus:shadow-lg focus:outline-none;
    &:focus {
      color: var(--primary-foreground);
    }
    @apply focus:ring-2 focus:ring-ring focus:ring-offset-2;
  }
}
