# ============================================================================
# nself-chat Docker Environment Variables
# ============================================================================
# Copy this file to .env and configure for your environment
# ============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=production
NEXT_PUBLIC_ENV=production
NEXT_PUBLIC_USE_DEV_AUTH=false

# Application branding
NEXT_PUBLIC_APP_NAME=nchat
NEXT_PUBLIC_PRIMARY_COLOR=#6366f1

# -----------------------------------------------------------------------------
# Docker Image Settings
# -----------------------------------------------------------------------------
DOCKER_REGISTRY=ghcr.io
IMAGE_NAME=nself/nself-chat
IMAGE_TAG=latest

# Build platform (linux/amd64, linux/arm64)
BUILD_PLATFORM=linux/amd64

# -----------------------------------------------------------------------------
# Backend Service URLs
# -----------------------------------------------------------------------------
# For local development with docker-compose
NEXT_PUBLIC_GRAPHQL_URL=http://hasura:8080/v1/graphql
NEXT_PUBLIC_AUTH_URL=http://auth:4000
NEXT_PUBLIC_STORAGE_URL=http://storage:8000

# For production (external URLs)
# NEXT_PUBLIC_GRAPHQL_URL=https://api.nself.io/v1/graphql
# NEXT_PUBLIC_AUTH_URL=https://auth.nself.io
# NEXT_PUBLIC_STORAGE_URL=https://storage.nself.io

# Client URL (for auth redirects)
CLIENT_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_DB=nchat
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Full database URL
DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Hasura Configuration
# -----------------------------------------------------------------------------
HASURA_ADMIN_SECRET=CHANGE_ME_IN_PRODUCTION
HASURA_JWT_SECRET={"type":"HS256","key":"your-jwt-secret-must-be-at-least-32-characters-long"}
HASURA_GRAPHQL_UNAUTHORIZED_ROLE=public
HASURA_GRAPHQL_ENABLE_CONSOLE=true
HASURA_GRAPHQL_DEV_MODE=false
HASURA_GRAPHQL_CORS_DOMAIN=*

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION

# -----------------------------------------------------------------------------
# SMTP / Email Configuration
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=user@example.com
SMTP_PASS=CHANGE_ME_IN_PRODUCTION
SMTP_SENDER=noreply@example.com

# -----------------------------------------------------------------------------
# MinIO / Storage Configuration
# -----------------------------------------------------------------------------
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio123

# S3-compatible storage endpoint
S3_ENDPOINT=http://storage:9000
S3_ACCESS_KEY=minio
S3_SECRET_KEY=minio123
S3_BUCKET=nself-chat

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_DOMAIN=http://localhost:3000,http://localhost:8080

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Monitoring (optional)
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://xxx@sentry.io/xxx
# PROMETHEUS_ENABLED=true

# -----------------------------------------------------------------------------
# Feature Flags (optional)
# -----------------------------------------------------------------------------
# FEATURE_VOICE_MESSAGES=false
# FEATURE_VIDEO_CALLS=false
# FEATURE_FILE_SHARING=true
